[toc]

# 过滤器


## 过滤器概述

`Filter` 即过滤器，是 `Java EE` 技术规范之一，作为目标资源的请求进行过滤的一套技术规范，是 `Java Web` 项目中最为实用的技术之一;

- `Filter` 接口定义了过滤器的开发规范，所有的过滤器都要实现该接口;
- `Filter` 的工作位置是项目中所有目标资源之前，容器在创建 `HttpServletRequest` 和 `HttpServletResponse` 之后，会先调用 `Filter` 的 `doFilter()` 方法;
- `Filter` 的 `doFilter()` 方法可以控制请求是否继续
  - 如果放行，则请求继续;
  - 如果拒绝，则请求到此为止，由过滤器本身做出响应;
- `Filter` 不仅可以对请求做出过滤，也可以在目标资源做出响应前，对响应再次进行处理;
- `Filter` 是 `GOF` 中责任链模式的典型案例;
- `Filter` 的常用应用包括但不限于：登录权限检查、解决网站乱码、过滤敏感字符、日志记录、性能分析...;

![Servlet拦截器原理](./imgs/servlet-filter.png)


## 过滤器链的顺序

一个 `web` 项目可以同时顶一个多个过滤器，多个过滤器对同一个资源进行过滤时，工作位置有先有后，整体形成一个工作链，成为过滤器链;

- 过滤器链中的过滤器的顺序由 `<filter-mapping>` 标签在 `web.xml` 中的顺序决定;
- 每个过滤器的过滤范围不同，针对不同的资源来说，过滤器链中的过滤器个数可能是不同的;
- 如果某个 `Filter` 是使用 `servlet-name` 进行匹配匹配规则的配置，那么这个 `Filter` 执行的优先级更低;


